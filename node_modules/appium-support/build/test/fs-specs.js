'use strict';

var _regeneratorRuntime = require('babel-runtime/regenerator')['default'];

var _interopRequireDefault = require('babel-runtime/helpers/interop-require-default')['default'];

var _indexJs = require('../index.js');

var _chai = require('chai');

var _chai2 = _interopRequireDefault(_chai);

var _path = require('path');

var _path2 = _interopRequireDefault(_path);

var should = _chai2['default'].should();

describe('fs', function () {
  var _this = this;

  it("should exist", function () {
    should.exist(_indexJs.fs);
  });
  it("should have expected methods", function () {
    should.exist(_indexJs.fs.open);
    should.exist(_indexJs.fs.close);
    should.exist(_indexJs.fs.access);
    should.exist(_indexJs.fs.mkdir);
    should.exist(_indexJs.fs.readlink);
    should.exist(_indexJs.fs.exists);
    should.exist(_indexJs.fs.rimraf);
    should.exist(_indexJs.fs.readFile);
    should.exist(_indexJs.fs.writeFile);
    should.exist(_indexJs.fs.lstat);
    should.exist(_indexJs.fs.mv);
  });

  describe("mkdir", function () {
    var dirName = _path2['default'].resolve(__dirname, "tmp");

    it("should make a directory that doesn't exist", function callee$2$0() {
      var exists;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            context$3$0.next = 2;
            return _regeneratorRuntime.awrap(_indexJs.fs.rimraf(dirName));

          case 2:
            context$3$0.next = 4;
            return _regeneratorRuntime.awrap(_indexJs.fs.mkdir(dirName));

          case 4:
            context$3$0.next = 6;
            return _regeneratorRuntime.awrap(_indexJs.fs.hasAccess(dirName));

          case 6:
            exists = context$3$0.sent;

            exists.should.be['true'];

          case 8:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });

    it("should not complain if the dir already exists", function callee$2$0() {
      var exists;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            context$3$0.next = 2;
            return _regeneratorRuntime.awrap(_indexJs.fs.hasAccess(dirName));

          case 2:
            exists = context$3$0.sent;

            exists.should.be['true'];
            context$3$0.next = 6;
            return _regeneratorRuntime.awrap(_indexJs.fs.mkdir(dirName));

          case 6:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });

    it("should still throw an error if something else goes wrong", function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            context$3$0.next = 2;
            return _regeneratorRuntime.awrap(_indexJs.fs.mkdir("/bin/foo").should.be.rejected);

          case 2:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  });

  it('hasAccess', function callee$1$0() {
    var existingPath, nonExistingPath;
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          existingPath = _path2['default'].resolve(__dirname, 'fs-specs.js');
          context$2$0.next = 3;
          return _regeneratorRuntime.awrap(_indexJs.fs.exists(existingPath));

        case 3:
          context$2$0.sent.should.be.ok;
          nonExistingPath = _path2['default'].resolve(__dirname, 'wrong-specs.js');
          context$2$0.next = 7;
          return _regeneratorRuntime.awrap(_indexJs.fs.hasAccess(nonExistingPath));

        case 7:
          context$2$0.sent.should.not.be.ok;

        case 8:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });
  it('exists', function callee$1$0() {
    var existingPath, nonExistingPath;
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          existingPath = _path2['default'].resolve(__dirname, 'fs-specs.js');
          context$2$0.next = 3;
          return _regeneratorRuntime.awrap(_indexJs.fs.exists(existingPath));

        case 3:
          context$2$0.sent.should.be.ok;
          nonExistingPath = _path2['default'].resolve(__dirname, 'wrong-specs.js');
          context$2$0.next = 7;
          return _regeneratorRuntime.awrap(_indexJs.fs.exists(nonExistingPath));

        case 7:
          context$2$0.sent.should.not.be.ok;

        case 8:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });
  it('readFile', function callee$1$0() {
    var existingPath;
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          existingPath = _path2['default'].resolve(__dirname, 'fs-specs.js');
          context$2$0.next = 3;
          return _regeneratorRuntime.awrap(_indexJs.fs.readFile(existingPath, 'utf8'));

        case 3:
          context$2$0.sent.should.contain('readFile');

        case 4:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });
  it('copyFile', function callee$1$0() {
    var existingPath, newPath;
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          existingPath = _path2['default'].resolve(__dirname, 'fs-specs.js');
          newPath = _path2['default'].resolve('/tmp', 'fs-specs.js');
          context$2$0.next = 4;
          return _regeneratorRuntime.awrap(_indexJs.fs.copyFile(existingPath, newPath));

        case 4:
          context$2$0.next = 6;
          return _regeneratorRuntime.awrap(_indexJs.fs.readFile(newPath, 'utf8'));

        case 6:
          context$2$0.sent.should.contain('readFile');

        case 7:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });
  it('rimraf', function callee$1$0() {
    var newPath;
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          newPath = _path2['default'].resolve('/tmp', 'fs-specs.js');
          context$2$0.next = 3;
          return _regeneratorRuntime.awrap(_indexJs.fs.exists(newPath));

        case 3:
          context$2$0.sent.should.be['true'];
          context$2$0.next = 6;
          return _regeneratorRuntime.awrap(_indexJs.fs.rimraf(newPath));

        case 6:
          context$2$0.next = 8;
          return _regeneratorRuntime.awrap(_indexJs.fs.exists(newPath));

        case 8:
          context$2$0.sent.should.be['false'];

        case 9:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });
  it('md5', function callee$1$0() {
    var existingPath;
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          existingPath = _path2['default'].resolve(__dirname, 'fs-specs.js');
          context$2$0.next = 3;
          return _regeneratorRuntime.awrap(_indexJs.fs.md5(existingPath));

        case 3:
          context$2$0.sent.should.have.length(32);

        case 4:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });
  it('stat', function callee$1$0() {
    var existingPath, stat;
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          existingPath = _path2['default'].resolve(__dirname, 'fs-specs.js');
          context$2$0.next = 3;
          return _regeneratorRuntime.awrap(_indexJs.fs.stat(existingPath));

        case 3:
          stat = context$2$0.sent;

          stat.should.have.property('atime');

        case 5:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });
});
//# sourceMappingURL=data:application/json;base64,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OzJCQUFFLE1BQU0sQ0FBQyxFQUFFOzsyQ0FDOUIsWUFBRyxNQUFNLENBQUMsT0FBTyxDQUFDOzs7OzJDQUNqQixZQUFHLE1BQU0sQ0FBQyxPQUFPLENBQUM7OzsyQkFBRSxNQUFNLENBQUMsRUFBRTs7Ozs7OztHQUNyQyxDQUFDLENBQUM7QUFDSCxJQUFFLENBQUMsS0FBSyxFQUFFO1FBQ0osWUFBWTs7OztBQUFaLHNCQUFZLEdBQUcsa0JBQUssT0FBTyxDQUFDLFNBQVMsRUFBRSxhQUFhLENBQUM7OzJDQUNsRCxZQUFHLEdBQUcsQ0FBQyxZQUFZLENBQUM7OzsyQkFBRSxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxFQUFFOzs7Ozs7O0dBQ25ELENBQUMsQ0FBQztBQUNILElBQUUsQ0FBQyxNQUFNLEVBQUU7UUFDTCxZQUFZLEVBQ1osSUFBSTs7OztBQURKLHNCQUFZLEdBQUcsa0JBQUssT0FBTyxDQUFDLFNBQVMsRUFBRSxhQUFhLENBQUM7OzJDQUN4QyxZQUFHLElBQUksQ0FBQyxZQUFZLENBQUM7OztBQUFsQyxjQUFJOztBQUNSLGNBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBQzs7Ozs7OztHQUNwQyxDQUFDLENBQUM7Q0FDSixDQUFDLENBQUMiLCJmaWxlIjoidGVzdC9mcy1zcGVjcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxuaW1wb3J0IHsgZnMgfSBmcm9tICcuLi9pbmRleC5qcyc7XG5pbXBvcnQgY2hhaSBmcm9tICdjaGFpJztcbmltcG9ydCBwYXRoIGZyb20gJ3BhdGgnO1xuXG5sZXQgc2hvdWxkID0gY2hhaS5zaG91bGQoKTtcblxuZGVzY3JpYmUoJ2ZzJywgZnVuY3Rpb24gKCkge1xuICBpdChcInNob3VsZCBleGlzdFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgc2hvdWxkLmV4aXN0KGZzKTtcbiAgfSk7XG4gIGl0KFwic2hvdWxkIGhhdmUgZXhwZWN0ZWQgbWV0aG9kc1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgc2hvdWxkLmV4aXN0KGZzLm9wZW4pO1xuICAgIHNob3VsZC5leGlzdChmcy5jbG9zZSk7XG4gICAgc2hvdWxkLmV4aXN0KGZzLmFjY2Vzcyk7XG4gICAgc2hvdWxkLmV4aXN0KGZzLm1rZGlyKTtcbiAgICBzaG91bGQuZXhpc3QoZnMucmVhZGxpbmspO1xuICAgIHNob3VsZC5leGlzdChmcy5leGlzdHMpO1xuICAgIHNob3VsZC5leGlzdChmcy5yaW1yYWYpO1xuICAgIHNob3VsZC5leGlzdChmcy5yZWFkRmlsZSk7XG4gICAgc2hvdWxkLmV4aXN0KGZzLndyaXRlRmlsZSk7XG4gICAgc2hvdWxkLmV4aXN0KGZzLmxzdGF0KTtcbiAgICBzaG91bGQuZXhpc3QoZnMubXYpO1xuICAgfSk7XG5cbiAgIGRlc2NyaWJlKFwibWtkaXJcIiwgZnVuY3Rpb24gKCkge1xuICAgICBsZXQgZGlyTmFtZSA9IHBhdGgucmVzb2x2ZShfX2Rpcm5hbWUsIFwidG1wXCIpO1xuXG4gICAgIGl0KFwic2hvdWxkIG1ha2UgYSBkaXJlY3RvcnkgdGhhdCBkb2Vzbid0IGV4aXN0XCIsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgICBhd2FpdCBmcy5yaW1yYWYoZGlyTmFtZSk7XG4gICAgICAgYXdhaXQgZnMubWtkaXIoZGlyTmFtZSk7XG4gICAgICAgbGV0IGV4aXN0cyA9IGF3YWl0IGZzLmhhc0FjY2VzcyhkaXJOYW1lKTtcbiAgICAgICBleGlzdHMuc2hvdWxkLmJlLnRydWU7XG4gICAgIH0pO1xuXG4gICAgIGl0KFwic2hvdWxkIG5vdCBjb21wbGFpbiBpZiB0aGUgZGlyIGFscmVhZHkgZXhpc3RzXCIsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgIGxldCBleGlzdHMgPSBhd2FpdCBmcy5oYXNBY2Nlc3MoZGlyTmFtZSk7XG4gICAgICAgICBleGlzdHMuc2hvdWxkLmJlLnRydWU7XG4gICAgICAgICBhd2FpdCBmcy5ta2RpcihkaXJOYW1lKTtcbiAgICAgfSk7XG5cbiAgICAgaXQoXCJzaG91bGQgc3RpbGwgdGhyb3cgYW4gZXJyb3IgaWYgc29tZXRoaW5nIGVsc2UgZ29lcyB3cm9uZ1wiLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICAgYXdhaXQgZnMubWtkaXIoXCIvYmluL2Zvb1wiKS5zaG91bGQuYmUucmVqZWN0ZWQ7XG4gICAgIH0pO1xuICAgfSk7XG5cbiAgIGl0KCdoYXNBY2Nlc3MnLCBhc3luYyAoKSA9PiB7XG4gICAgbGV0IGV4aXN0aW5nUGF0aCA9IHBhdGgucmVzb2x2ZShfX2Rpcm5hbWUsICdmcy1zcGVjcy5qcycpO1xuICAgIChhd2FpdCBmcy5leGlzdHMoZXhpc3RpbmdQYXRoKSkuc2hvdWxkLmJlLm9rO1xuICAgIGxldCBub25FeGlzdGluZ1BhdGggPSBwYXRoLnJlc29sdmUoX19kaXJuYW1lLCAnd3Jvbmctc3BlY3MuanMnKTtcbiAgICAoYXdhaXQgZnMuaGFzQWNjZXNzKG5vbkV4aXN0aW5nUGF0aCkpLnNob3VsZC5ub3QuYmUub2s7XG4gIH0pO1xuICBpdCgnZXhpc3RzJywgYXN5bmMgKCkgPT4ge1xuICAgIGxldCBleGlzdGluZ1BhdGggPSBwYXRoLnJlc29sdmUoX19kaXJuYW1lLCAnZnMtc3BlY3MuanMnKTtcbiAgICAoYXdhaXQgZnMuZXhpc3RzKGV4aXN0aW5nUGF0aCkpLnNob3VsZC5iZS5vaztcbiAgICBsZXQgbm9uRXhpc3RpbmdQYXRoID0gcGF0aC5yZXNvbHZlKF9fZGlybmFtZSwgJ3dyb25nLXNwZWNzLmpzJyk7XG4gICAgKGF3YWl0IGZzLmV4aXN0cyhub25FeGlzdGluZ1BhdGgpKS5zaG91bGQubm90LmJlLm9rO1xuICB9KTtcbiAgaXQoJ3JlYWRGaWxlJywgYXN5bmMgKCkgPT4ge1xuICAgIGxldCBleGlzdGluZ1BhdGggPSBwYXRoLnJlc29sdmUoX19kaXJuYW1lLCAnZnMtc3BlY3MuanMnKTtcbiAgICAoYXdhaXQgZnMucmVhZEZpbGUoZXhpc3RpbmdQYXRoLCAndXRmOCcpKS5zaG91bGQuY29udGFpbigncmVhZEZpbGUnKTtcbiAgfSk7XG4gIGl0KCdjb3B5RmlsZScsIGFzeW5jICgpID0+IHtcbiAgICBsZXQgZXhpc3RpbmdQYXRoID0gcGF0aC5yZXNvbHZlKF9fZGlybmFtZSwgJ2ZzLXNwZWNzLmpzJyk7XG4gICAgbGV0IG5ld1BhdGggPSBwYXRoLnJlc29sdmUoJy90bXAnLCAnZnMtc3BlY3MuanMnKTtcbiAgICBhd2FpdCBmcy5jb3B5RmlsZShleGlzdGluZ1BhdGgsIG5ld1BhdGgpO1xuICAgIChhd2FpdCBmcy5yZWFkRmlsZShuZXdQYXRoLCAndXRmOCcpKS5zaG91bGQuY29udGFpbigncmVhZEZpbGUnKTtcbiAgfSk7XG4gIGl0KCdyaW1yYWYnLCBhc3luYyAoKSA9PiB7XG4gICAgbGV0IG5ld1BhdGggPSBwYXRoLnJlc29sdmUoJy90bXAnLCAnZnMtc3BlY3MuanMnKTtcbiAgICAoYXdhaXQgZnMuZXhpc3RzKG5ld1BhdGgpKS5zaG91bGQuYmUudHJ1ZTtcbiAgICBhd2FpdCBmcy5yaW1yYWYobmV3UGF0aCk7XG4gICAgKGF3YWl0IGZzLmV4aXN0cyhuZXdQYXRoKSkuc2hvdWxkLmJlLmZhbHNlO1xuICB9KTtcbiAgaXQoJ21kNScsIGFzeW5jICgpID0+IHtcbiAgICBsZXQgZXhpc3RpbmdQYXRoID0gcGF0aC5yZXNvbHZlKF9fZGlybmFtZSwgJ2ZzLXNwZWNzLmpzJyk7XG4gICAgKGF3YWl0IGZzLm1kNShleGlzdGluZ1BhdGgpKS5zaG91bGQuaGF2ZS5sZW5ndGgoMzIpO1xuICB9KTtcbiAgaXQoJ3N0YXQnLCBhc3luYyAoKSA9PiB7XG4gICAgbGV0IGV4aXN0aW5nUGF0aCA9IHBhdGgucmVzb2x2ZShfX2Rpcm5hbWUsICdmcy1zcGVjcy5qcycpO1xuICAgIGxldCBzdGF0ID0gYXdhaXQgZnMuc3RhdChleGlzdGluZ1BhdGgpO1xuICAgIHN0YXQuc2hvdWxkLmhhdmUucHJvcGVydHkoJ2F0aW1lJyk7XG4gIH0pO1xufSk7XG4iXX0=
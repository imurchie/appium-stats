'use strict';

var _regeneratorRuntime = require('babel-runtime/regenerator')['default'];

var _interopRequireDefault = require('babel-runtime/helpers/interop-require-default')['default'];

var _indexJs = require('../index.js');

var _chai = require('chai');

var _chai2 = _interopRequireDefault(_chai);

var _chaiAsPromised = require('chai-as-promised');

var _chaiAsPromised2 = _interopRequireDefault(_chaiAsPromised);

var _bluebird = require('bluebird');

var _bluebird2 = _interopRequireDefault(_bluebird);

var _sinon = require('sinon');

var _sinon2 = _interopRequireDefault(_sinon);

var should = _chai2['default'].should();
_chai2['default'].use(_chaiAsPromised2['default']);

describe('util', function () {

  describe("hasValue ", function () {
    it("should exist", function () {
      should.exist(_indexJs.util.hasValue);
    });

    it('should handle undefined', function () {
      _indexJs.util.hasValue(undefined).should.be['false'];
    });

    it('should handle not a number', function () {
      _indexJs.util.hasValue(NaN).should.be['false'];
    });

    it('should handle null', function () {
      _indexJs.util.hasValue(null).should.be['false'];
    });

    it('should handle functions', function () {
      _indexJs.util.hasValue(function () {}).should.be['true'];
    });

    it('should handle empty arrays', function () {
      _indexJs.util.hasValue({}).should.be['true'];
    });

    it('should handle zero', function () {
      _indexJs.util.hasValue(0).should.be['true'];
    });

    it('should handle simple string', function () {
      _indexJs.util.hasValue('string').should.be['true'];
    });

    it('should handle booleans', function () {
      _indexJs.util.hasValue(false).should.be['true'];
    });

    it('should handle empty strings', function () {
      _indexJs.util.hasValue('').should.be['true'];
    });
  });

  describe("hasContent ", function () {
    it('should exist', function () {
      should.exist(_indexJs.util.hasContent);
    });

    it('should handle undefined', function () {
      _indexJs.util.hasContent(undefined).should.be['false'];
    });

    it('should handle not a number', function () {
      _indexJs.util.hasContent(NaN).should.be['false'];
    });

    it('should handle null', function () {
      _indexJs.util.hasContent(null).should.be['false'];
    });

    it('should handle functions', function () {
      _indexJs.util.hasContent(function () {}).should.be['false'];
    });

    it('should handle empty arrays', function () {
      _indexJs.util.hasContent({}).should.be['false'];
    });

    it('should handle zero', function () {
      _indexJs.util.hasContent(0).should.be['false'];
    });

    it('should handle simple string', function () {
      _indexJs.util.hasContent('string').should.be['true'];
    });

    it('should handle booleans', function () {
      _indexJs.util.hasContent(false).should.be['false'];
    });

    it('should handle empty strings', function () {
      _indexJs.util.hasContent('').should.be['false'];
    });
  });

  describe("escapeSpace", function () {
    it("should do nothing to a string without space", function () {
      var actual = 'appium';
      var expected = 'appium';
      _indexJs.util.escapeSpace(actual).should.equal(expected);
    });

    it("should do escape spaces", function () {
      var actual = '/Applications/ Xcode 6.1.1.app/Contents/Developer';
      var expected = '/Applications/\\ Xcode\\ 6.1.1.app/Contents/Developer';
      _indexJs.util.escapeSpace(actual).should.equal(expected);
    });

    it("should escape consecutive spaces", function () {
      var actual = 'appium   space';
      var expected = 'appium\\ \\ \\ space';
      _indexJs.util.escapeSpace(actual).should.equal(expected);
    });
  });

  describe("localIp", function () {
    it("should find a local ip address", function () {
      var utilMock = _sinon2['default'].mock(_indexJs.util);
      utilMock.expects('localIp').returns('10.35.4.175');
      _indexJs.util.localIp();
      utilMock.verify();
    });
  });

  describe("cancellableDelay", function () {
    it("should delay", function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            context$3$0.next = 2;
            return _regeneratorRuntime.awrap(_indexJs.util.cancellableDelay('10'));

          case 2:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it("cancel should work", function callee$2$0() {
      var delay;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            delay = _indexJs.util.cancellableDelay('1000');

            _bluebird2['default'].delay(10).then(function () {
              delay.cancel();
            }).done();
            context$3$0.next = 4;
            return _regeneratorRuntime.awrap(delay.should.be.rejectedWith(/cancellation error/));

          case 4:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  });
});
//# sourceMappingURL=data:application/json;base64,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QUM7O0FBQ3pDLGtDQUFFLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsWUFBVztBQUFFLG1CQUFLLENBQUMsTUFBTSxFQUFFLENBQUM7YUFBRSxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUM7OzZDQUNsRCxLQUFLLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxZQUFZLENBQUMsb0JBQW9CLENBQUM7Ozs7Ozs7S0FDekQsQ0FBQyxDQUFDO0dBQ0osQ0FBQyxDQUFDO0NBQ0osQ0FBQyxDQUFDIiwiZmlsZSI6InRlc3QvdXRpbC1zcGVjcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxuaW1wb3J0IHsgdXRpbCB9IGZyb20gJy4uL2luZGV4LmpzJztcbmltcG9ydCBjaGFpIGZyb20gJ2NoYWknO1xuaW1wb3J0IGNoYWlBc1Byb21pc2VkIGZyb20gJ2NoYWktYXMtcHJvbWlzZWQnO1xuaW1wb3J0IEIgZnJvbSAnYmx1ZWJpcmQnO1xuaW1wb3J0IHNpbm9uIGZyb20gJ3Npbm9uJztcblxubGV0IHNob3VsZCA9IGNoYWkuc2hvdWxkKCk7XG5jaGFpLnVzZShjaGFpQXNQcm9taXNlZCk7XG5cbmRlc2NyaWJlKCd1dGlsJywgZnVuY3Rpb24gKCkge1xuXG4gIGRlc2NyaWJlKFwiaGFzVmFsdWUgXCIsIGZ1bmN0aW9uICgpIHtcbiAgICBpdChcInNob3VsZCBleGlzdFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICBzaG91bGQuZXhpc3QodXRpbC5oYXNWYWx1ZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSB1bmRlZmluZWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICB1dGlsLmhhc1ZhbHVlKHVuZGVmaW5lZCkuc2hvdWxkLmJlLmZhbHNlO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgbm90IGEgbnVtYmVyJywgZnVuY3Rpb24gKCkge1xuICAgICAgdXRpbC5oYXNWYWx1ZShOYU4pLnNob3VsZC5iZS5mYWxzZTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIG51bGwnLCBmdW5jdGlvbiAoKSB7XG4gICAgICB1dGlsLmhhc1ZhbHVlKG51bGwpLnNob3VsZC5iZS5mYWxzZTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGZ1bmN0aW9ucycsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHV0aWwuaGFzVmFsdWUoZnVuY3Rpb24gKCkge30pLnNob3VsZC5iZS50cnVlO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgZW1wdHkgYXJyYXlzJywgZnVuY3Rpb24gKCkge1xuICAgICAgdXRpbC5oYXNWYWx1ZSh7fSkuc2hvdWxkLmJlLnRydWU7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSB6ZXJvJywgZnVuY3Rpb24gKCkge1xuICAgICAgdXRpbC5oYXNWYWx1ZSgwKS5zaG91bGQuYmUudHJ1ZTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHNpbXBsZSBzdHJpbmcnLCBmdW5jdGlvbiAoKSB7XG4gICAgICB1dGlsLmhhc1ZhbHVlKCdzdHJpbmcnKS5zaG91bGQuYmUudHJ1ZTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGJvb2xlYW5zJywgZnVuY3Rpb24gKCkge1xuICAgICAgdXRpbC5oYXNWYWx1ZShmYWxzZSkuc2hvdWxkLmJlLnRydWU7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBlbXB0eSBzdHJpbmdzJywgZnVuY3Rpb24gKCkge1xuICAgICAgdXRpbC5oYXNWYWx1ZSgnJykuc2hvdWxkLmJlLnRydWU7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKFwiaGFzQ29udGVudCBcIiwgZnVuY3Rpb24gKCkge1xuICAgIGl0KCdzaG91bGQgZXhpc3QnLCBmdW5jdGlvbiAoKSB7XG4gICAgICBzaG91bGQuZXhpc3QodXRpbC5oYXNDb250ZW50KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHVuZGVmaW5lZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHV0aWwuaGFzQ29udGVudCh1bmRlZmluZWQpLnNob3VsZC5iZS5mYWxzZTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIG5vdCBhIG51bWJlcicsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHV0aWwuaGFzQ29udGVudChOYU4pLnNob3VsZC5iZS5mYWxzZTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIG51bGwnLCBmdW5jdGlvbiAoKSB7XG4gICAgICB1dGlsLmhhc0NvbnRlbnQobnVsbCkuc2hvdWxkLmJlLmZhbHNlO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgZnVuY3Rpb25zJywgZnVuY3Rpb24gKCkge1xuICAgICAgdXRpbC5oYXNDb250ZW50KGZ1bmN0aW9uICgpIHt9KS5zaG91bGQuYmUuZmFsc2U7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBlbXB0eSBhcnJheXMnLCBmdW5jdGlvbiAoKSB7XG4gICAgICB1dGlsLmhhc0NvbnRlbnQoe30pLnNob3VsZC5iZS5mYWxzZTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHplcm8nLCBmdW5jdGlvbiAoKSB7XG4gICAgICB1dGlsLmhhc0NvbnRlbnQoMCkuc2hvdWxkLmJlLmZhbHNlO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgc2ltcGxlIHN0cmluZycsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHV0aWwuaGFzQ29udGVudCgnc3RyaW5nJykuc2hvdWxkLmJlLnRydWU7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBib29sZWFucycsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHV0aWwuaGFzQ29udGVudChmYWxzZSkuc2hvdWxkLmJlLmZhbHNlO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgZW1wdHkgc3RyaW5ncycsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHV0aWwuaGFzQ29udGVudCgnJykuc2hvdWxkLmJlLmZhbHNlO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZShcImVzY2FwZVNwYWNlXCIsIGZ1bmN0aW9uICgpIHtcbiAgICBpdChcInNob3VsZCBkbyBub3RoaW5nIHRvIGEgc3RyaW5nIHdpdGhvdXQgc3BhY2VcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgbGV0IGFjdHVhbCA9ICdhcHBpdW0nO1xuICAgICAgbGV0IGV4cGVjdGVkID0gJ2FwcGl1bSc7XG4gICAgICB1dGlsLmVzY2FwZVNwYWNlKGFjdHVhbCkuc2hvdWxkLmVxdWFsKGV4cGVjdGVkKTtcbiAgICB9KTtcblxuICAgIGl0KFwic2hvdWxkIGRvIGVzY2FwZSBzcGFjZXNcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgbGV0IGFjdHVhbCA9ICcvQXBwbGljYXRpb25zLyBYY29kZSA2LjEuMS5hcHAvQ29udGVudHMvRGV2ZWxvcGVyJztcbiAgICAgIGxldCBleHBlY3RlZCA9ICcvQXBwbGljYXRpb25zL1xcXFwgWGNvZGVcXFxcIDYuMS4xLmFwcC9Db250ZW50cy9EZXZlbG9wZXInO1xuICAgICAgdXRpbC5lc2NhcGVTcGFjZShhY3R1YWwpLnNob3VsZC5lcXVhbChleHBlY3RlZCk7XG4gICAgfSk7XG5cbiAgICBpdChcInNob3VsZCBlc2NhcGUgY29uc2VjdXRpdmUgc3BhY2VzXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGxldCBhY3R1YWwgPSAnYXBwaXVtICAgc3BhY2UnO1xuICAgICAgbGV0IGV4cGVjdGVkID0gJ2FwcGl1bVxcXFwgXFxcXCBcXFxcIHNwYWNlJztcbiAgICAgIHV0aWwuZXNjYXBlU3BhY2UoYWN0dWFsKS5zaG91bGQuZXF1YWwoZXhwZWN0ZWQpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZShcImxvY2FsSXBcIiwgZnVuY3Rpb24gKCkge1xuICAgIGl0KFwic2hvdWxkIGZpbmQgYSBsb2NhbCBpcCBhZGRyZXNzXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGxldCB1dGlsTW9jayA9IHNpbm9uLm1vY2sodXRpbCk7XG4gICAgICB1dGlsTW9jay5leHBlY3RzKCdsb2NhbElwJykucmV0dXJucygnMTAuMzUuNC4xNzUnKTtcbiAgICAgIHV0aWwubG9jYWxJcCgpO1xuICAgICAgdXRpbE1vY2sudmVyaWZ5KCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKFwiY2FuY2VsbGFibGVEZWxheVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgaXQoXCJzaG91bGQgZGVsYXlcIiwgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgYXdhaXQgdXRpbC5jYW5jZWxsYWJsZURlbGF5KCcxMCcpO1xuICAgIH0pO1xuICAgIGl0KFwiY2FuY2VsIHNob3VsZCB3b3JrXCIsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGxldCBkZWxheSA9IHV0aWwuY2FuY2VsbGFibGVEZWxheSgnMTAwMCcpO1xuICAgICAgQi5kZWxheSgxMCkudGhlbihmdW5jdGlvbigpIHsgZGVsYXkuY2FuY2VsKCk7IH0pLmRvbmUoKTtcbiAgICAgIGF3YWl0IGRlbGF5LnNob3VsZC5iZS5yZWplY3RlZFdpdGgoL2NhbmNlbGxhdGlvbiBlcnJvci8pO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIl19
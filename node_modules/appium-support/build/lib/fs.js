'use strict';

var _regeneratorRuntime = require('babel-runtime/regenerator')['default'];

var _getIterator = require('babel-runtime/core-js/get-iterator')['default'];

var _interopRequireDefault = require('babel-runtime/helpers/interop-require-default')['default'];

Object.defineProperty(exports, '__esModule', {
  value: true
});

var _fs2 = require('fs');

var _fs3 = _interopRequireDefault(_fs2);

var _rimraf = require('rimraf');

var _rimraf2 = _interopRequireDefault(_rimraf);

var _md52 = require('md5');

var _md53 = _interopRequireDefault(_md52);

var _ncp = require('ncp');

var _ncp2 = _interopRequireDefault(_ncp);

var _bluebird = require('bluebird');

var _bluebird2 = _interopRequireDefault(_bluebird);

var _mv = require('mv');

var _mv2 = _interopRequireDefault(_mv);

var fs = {
  hasAccess: function hasAccess(path) {
    return _regeneratorRuntime.async(function hasAccess$(context$1$0) {
      while (1) switch (context$1$0.prev = context$1$0.next) {
        case 0:
          context$1$0.prev = 0;
          context$1$0.next = 3;
          return _regeneratorRuntime.awrap(this.access(path, fs.F_OK | fs.R_OK));

        case 3:
          context$1$0.next = 8;
          break;

        case 5:
          context$1$0.prev = 5;
          context$1$0.t0 = context$1$0['catch'](0);
          return context$1$0.abrupt('return', false);

        case 8:
          return context$1$0.abrupt('return', true);

        case 9:
        case 'end':
          return context$1$0.stop();
      }
    }, null, this, [[0, 5]]);
  },
  exists: function exists(path) {
    return this.hasAccess(path);
  },
  rimraf: _bluebird2['default'].promisify(_rimraf2['default']),
  mkdir: function mkdir(dirName) {
    var _mkdir;

    return _regeneratorRuntime.async(function mkdir$(context$1$0) {
      while (1) switch (context$1$0.prev = context$1$0.next) {
        case 0:
          _mkdir = _bluebird2['default'].promisify(_fs3['default'].mkdir);
          context$1$0.prev = 1;
          context$1$0.next = 4;
          return _regeneratorRuntime.awrap(_mkdir(dirName));

        case 4:
          context$1$0.next = 10;
          break;

        case 6:
          context$1$0.prev = 6;
          context$1$0.t0 = context$1$0['catch'](1);

          if (!(context$1$0.t0 && context$1$0.t0.code !== "EEXIST")) {
            context$1$0.next = 10;
            break;
          }

          throw context$1$0.t0;

        case 10:
        case 'end':
          return context$1$0.stop();
      }
    }, null, this, [[1, 6]]);
  },
  copyFile: _bluebird2['default'].promisify(_ncp2['default']),
  md5: function md5(filePath) {
    return _regeneratorRuntime.async(function md5$(context$1$0) {
      while (1) switch (context$1$0.prev = context$1$0.next) {
        case 0:
          context$1$0.next = 2;
          return _regeneratorRuntime.awrap(fs.readFile(filePath));

        case 2:
          context$1$0.t0 = context$1$0.sent;
          return context$1$0.abrupt('return', (0, _md53['default'])(context$1$0.t0));

        case 4:
        case 'end':
          return context$1$0.stop();
      }
    }, null, this);
  },
  mv: _bluebird2['default'].promisify(_mv2['default'])
};

var simples = ['open', 'close', 'access', 'readFile', 'writeFile', 'write', 'readlink', 'chmod', 'unlink', 'readdir', 'stat', 'rename', 'lstat'];

var _iteratorNormalCompletion = true;
var _didIteratorError = false;
var _iteratorError = undefined;

try {
  for (var _iterator = _getIterator(simples), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
    var s = _step.value;

    fs[s] = _bluebird2['default'].promisify(_fs3['default'][s]);
  }
} catch (err) {
  _didIteratorError = true;
  _iteratorError = err;
} finally {
  try {
    if (!_iteratorNormalCompletion && _iterator['return']) {
      _iterator['return']();
    }
  } finally {
    if (_didIteratorError) {
      throw _iteratorError;
    }
  }
}

exports['default'] = fs;
module.exports = exports['default'];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYi9mcy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7bUJBQWdCLElBQUk7Ozs7c0JBQ0QsUUFBUTs7OztvQkFDWCxLQUFLOzs7O21CQUNMLEtBQUs7Ozs7d0JBQ1AsVUFBVTs7OztrQkFDVCxJQUFJOzs7O0FBRW5CLElBQUksRUFBRSxHQUFHO0FBQ1AsV0FBUyxFQUFFLG1CQUFnQixJQUFJOzs7Ozs7MkNBRXJCLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLEVBQUUsQ0FBQyxJQUFJLEdBQUcsRUFBRSxDQUFDLElBQUksQ0FBQzs7Ozs7Ozs7OzhDQUVuQyxLQUFLOzs7OENBRVAsSUFBSTs7Ozs7OztHQUNaO0FBQ0QsUUFBTSxFQUFFLGdCQUFVLElBQUksRUFBRTtBQUFFLFdBQU8sSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQztHQUFFO0FBQ3hELFFBQU0sRUFBRSxzQkFBRSxTQUFTLHFCQUFRO0FBQzNCLE9BQUssRUFBRSxlQUFnQixPQUFPO1FBQ3hCLE1BQU07Ozs7O0FBQU4sZ0JBQU0sR0FBRyxzQkFBRSxTQUFTLENBQUMsZ0JBQUksS0FBSyxDQUFDOzs7MkNBRTNCLE1BQU0sQ0FBQyxPQUFPLENBQUM7Ozs7Ozs7Ozs7Z0JBRWpCLGtCQUFPLGVBQUksSUFBSSxLQUFLLFFBQVEsQ0FBQTs7Ozs7Ozs7Ozs7O0dBSW5DO0FBQ0QsVUFBUSxFQUFFLHNCQUFFLFNBQVMsa0JBQUs7QUFDMUIsS0FBRyxFQUFFLGFBQWdCLFFBQVE7Ozs7OzJDQUNWLEVBQUUsQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDOzs7Ozs7Ozs7OztHQUN2QztBQUNELElBQUUsRUFBRSxzQkFBRSxTQUFTLGlCQUFJO0NBQ3BCLENBQUM7O0FBRUYsSUFBTSxPQUFPLEdBQUcsQ0FBQyxNQUFNLEVBQUUsT0FBTyxFQUFFLFFBQVEsRUFBRSxVQUFVLEVBQUUsV0FBVyxFQUNsRCxPQUFPLEVBQUUsVUFBVSxFQUFFLE9BQU8sRUFBRSxRQUFRLEVBQUUsU0FBUyxFQUFFLE1BQU0sRUFDekQsUUFBUSxFQUFFLE9BQU8sQ0FBQyxDQUFDOzs7Ozs7O0FBRXBDLG9DQUFjLE9BQU8sNEdBQUU7UUFBZCxDQUFDOztBQUNSLE1BQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxzQkFBRSxTQUFTLENBQUMsZ0JBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztHQUM3Qjs7Ozs7Ozs7Ozs7Ozs7OztxQkFFYyxFQUFFIiwiZmlsZSI6ImxpYi9mcy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBfZnMgZnJvbSAnZnMnO1xuaW1wb3J0IHJpbXJhZiBmcm9tICdyaW1yYWYnO1xuaW1wb3J0IG1kNSBmcm9tICdtZDUnO1xuaW1wb3J0IG5jcCBmcm9tICduY3AnO1xuaW1wb3J0IEIgZnJvbSAnYmx1ZWJpcmQnO1xuaW1wb3J0IG12IGZyb20gJ212JztcblxubGV0IGZzID0ge1xuICBoYXNBY2Nlc3M6IGFzeW5jIGZ1bmN0aW9uIChwYXRoKSB7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHRoaXMuYWNjZXNzKHBhdGgsIGZzLkZfT0sgfCBmcy5SX09LKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH0sXG4gIGV4aXN0czogZnVuY3Rpb24gKHBhdGgpIHsgcmV0dXJuIHRoaXMuaGFzQWNjZXNzKHBhdGgpOyB9LFxuICByaW1yYWY6IEIucHJvbWlzaWZ5KHJpbXJhZiksXG4gIG1rZGlyOiBhc3luYyBmdW5jdGlvbiAoZGlyTmFtZSkge1xuICAgIGxldCBfbWtkaXIgPSBCLnByb21pc2lmeShfZnMubWtkaXIpO1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCBfbWtkaXIoZGlyTmFtZSk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBpZiAoZXJyICYmIGVyci5jb2RlICE9PSBcIkVFWElTVFwiKSB7XG4gICAgICAgIHRocm93IGVycjtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG4gIGNvcHlGaWxlOiBCLnByb21pc2lmeShuY3ApLFxuICBtZDU6IGFzeW5jIGZ1bmN0aW9uIChmaWxlUGF0aCkge1xuICAgIHJldHVybiBtZDUoYXdhaXQgZnMucmVhZEZpbGUoZmlsZVBhdGgpKTtcbiAgfSxcbiAgbXY6IEIucHJvbWlzaWZ5KG12KVxufTtcblxuY29uc3Qgc2ltcGxlcyA9IFsnb3BlbicsICdjbG9zZScsICdhY2Nlc3MnLCAncmVhZEZpbGUnLCAnd3JpdGVGaWxlJyxcbiAgICAgICAgICAgICAgICAgJ3dyaXRlJywgJ3JlYWRsaW5rJywgJ2NobW9kJywgJ3VubGluaycsICdyZWFkZGlyJywgJ3N0YXQnLFxuICAgICAgICAgICAgICAgICAncmVuYW1lJywgJ2xzdGF0J107XG5cbmZvciAobGV0IHMgb2Ygc2ltcGxlcykge1xuICBmc1tzXSA9IEIucHJvbWlzaWZ5KF9mc1tzXSk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZzO1xuIl19